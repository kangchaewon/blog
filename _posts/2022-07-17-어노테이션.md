---
layout: post
title: 어노테이션과 프로세서 
categories: java
tags: [java]
---

annotation(어노테이션)
-----------------------------
+ 자바 애너테이션(Java Annotation)은 자바 소스 코드에 추가하여 사용할 수 있는 메타데이터의 일종이다. 
+ 보통 @ 기호를 앞에 붙여서 사용하고 JDK 1.5 버전 이상에서 사용 가능하다. 
+ 자바 애너테이션은 클래스 파일에 임베디드되어 컴파일러에 의해 생성된 후 자바 가상머신에 포함되어 작동한다.
+ 표준(내장) 어노테이션 : 자바가 기본적으로 제공해주는 어노테이션
    - @Override
        * 오버라이딩을 올바르게 했는지 컴파일러가 체크한다.
        * Override는 오버라이딩할 때, 메서드의 이름을 잘못적는 실수를 방지해준다.
    - @Deprecated 
        * 앞으로 사용하지 않을 것을 권장하는 필드나 메서드에 붙인다.
        * 자바에서 메소드를 사용했는데 다음과 같이 표시된 경험이 있을 것이다.
    - @SuppressWarnings
        * 컴파일러의 경고메세지가 나타나지 않게 한다.
    - @FunctionalInterface
        * 함수형 인터페이스에 붙이면, 컴파일러가 올바르게 작성했는지 체크
        * 해당 어노테이션은, 함수형 인터페이스의 "하나의 추상메서드만 가져야 한다는 제약"을 확인해준다.
        * 또한 함수형 인터페이스라는 것을 알려주는 역할도 한다.
+ 메타 어노테이션 : 어노테이션을 위한 어노테이션
    - @Target
        * 어노테이션을 정의할 때, 적용대상을 지정하는데 사용한다.
    - @Retention
        * 어노테이션이 유지되는 기간을 지정하는데 사용
    - @Documented
        * javadoc으로 작성한 문서에 포함시키려면 해당 어노테이션을 붙인다.
    - @Inherited
        * 어노테이션도 상속이 가능하다. 어노테이션을 자손 클래스에 상속하고자 할 때, @Inherited를 붙인다.
    - @Repeatable
        * 반복해서 붙일 수 있는 어노테이션을 정의할 때 사용
        * @Repeatable 어노테이션은 위의 "ToDos"처럼 "컨테이너 어노테이션"도 정의해야 한다.
+ 사용자정의 어노테이션 : 사용자가 직접 정의하는 어노테이션
```java
@interface 이름{
	타입 요소 이름(); // 어노테이션의 요소를 선언
	    ...
}
```

lombok
------------------
+ 어노테이션 기반으로 코드를 자동완성 해주는 라이브러리이다. 
+ Lombok을 이용하면 Getter, Setter, Equlas, ToString 등과 다양한 방면의 코드를 자동완성 시킬 수 있다.
+ 만약 위의 Store에서 생성자도 필요하고, toString 함수도 Override 해야하는 등 추가적인 작업이 필요하다면 1개의 VO 클래스만 해도 상당히 길어지고, 코드의 가독성은 떨어지는 등의 단점이 있다. 
+ 만약 위의 클래스에 Lombok을 적용한다면 아래와 같이 단순화시킬 수 있다. 
+ lombok의 장점
    - 어노테이션 기반의 코드 자동 생성을 통한 생산성 향상
    - 반복되는 코드 다이어트를 통한 가독성 및 유지보수성 향상
    - Getter, Setter 외에 빌더 패턴이나 로그 생성 등 다양한 방면으로 활용 가능

annotation processor
-----------------------------
+ 일반적으로 애노테이션에 대한 코드베이스를 검사, 수정 또는 생성하는데 사용됩니다. 
+ 본질적으로 애노테이션 프로세서는 java 컴파일러의 플러그인의 일종입니다. 
+ 애노테이션 프로세서를 적재적소에 잘 사용한다면 개발자의 코드를 단순화 할 수 있습니다.

-----------------------------------------------------------------------

[어노테이션의 동작 순서]
1. 자바 컴파일러가 컴파일을 수행합니다. (자바 컴파일러는 애노테이션 프로세서에 대해 미리 알고 있어야 합니다.)
2. 실행되지 않은 애노테이션 프로세서들을 수행합니다. (각각의 프로세서는 모두 각자에 역할에 맞는 구현이 되어있어야합니다.)
3. 프로세서 내부에서 애노테이션이 달린 Element(변수, 메소드, 클래스 등)들에 대한 처리를 합니다. (보통 이곳에서 자바 클래스를 생성합니다.)
4. 컴파일러가 모든 애노테이션 프로세서가 실행되었는지 확인하고, 그렇지 않다면 반복해서 위 작업을 수행합니다.
